# -*- coding: utf-8 -*-
"""dav_lab_08_TITANIC DATASET_19/11.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1dHcJlRk7K6EwojJxJTKuUVqnQnLf9JVu
"""

import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_csv('/content/sample_data/train.csv')

urvival_rate = df.groupby('Pclass')['Survived'].mean()
plt.figure(figsize=(8,5))
plt.bar(survival_rate.index, survival_rate.values)
plt.title("Survival Rate by Passenger Class")
plt.xlabel("Passenger Class (Pclass)")
plt.ylabel("Survival Rate")
plt.xticks([1, 2, 3])
plt.grid(axis='y', linestyle='--', alpha=0.5)
plt.show()

survival_counts = df['Survived'].value_counts()
plt.figure(figsize=(6,6))
plt.pie(
    survival_counts,
    labels=["Non-Survived", "Survived"],
    autopct="%1.1f%%",
    startangle=90
)
plt.title("Proportion of Survivors vs. Non-Survivors")
plt.show()

stack_data = df.groupby(['Pclass', 'Sex', 'Survived']).size().unstack(fill_value=0)
plt.figure(figsize=(10,6))
# index example: (1, 'male'), (1, 'female'), ...
x_labels = [f"{cls}\n{sex}" for cls, sex in stack_data.index]

# bottom stacking
bottom_vals = stack_data[0]
plt.bar(x_labels, stack_data[0], label="Non-Survived")
plt.bar(x_labels, stack_data[1], bottom=stack_data[0], label="Survived")
plt.title("Survivors vs Non-Survivors by Passenger Class and Sex")
plt.xlabel("Class & Sex")
plt.ylabel("Count")
plt.legend()
plt.grid(axis='y', linestyle='--', alpha=0.4)
plt.show()